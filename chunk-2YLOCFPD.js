import{Aa as _,H as F,Ka as f,L as P,La as y,Ma as v,Na as L,Oa as I,Pa as T,Q as d,R as p,Ra as m,Sa as s,Ta as g,Ua as S,Va as k,Wa as b,Xa as u,a as E,ab as c,b as M,ca as j,cb as x,gb as O,hb as B,jb as R,lb as J,mb as $,nb as h,qa as a,xb as X}from"./chunk-JLDEQ6DM.js";function w(n=0){return{value:n}}function V(){return{numbers:[w()]}}function H(n){return n?{numbers:n.numbers.map(e=>({value:e.value}))}:V()}function K(n){return(n??[void 0]).map(H)}function q(n){return n.map(e=>e.numbers.map(t=>t.value))}function z(n){return n?n.map(e=>({numbers:e.map(t=>({value:t}))})):K()}function U(n,e){if(n&1){let t=g();m(0,"div",5),c(1),m(2,"input",8),b("change",function(o){let r=d(t).$index,l=u();return p(l.changeNumber(r,o.target.valueAsNumber))}),s(),m(3,"button",1),b("click",function(){let o=d(t).$index,r=u();return p(r.removeNumber(o))}),c(4," X "),s()()}if(n&2){let t=e.$implicit,i=e.$index,o=u();a(),x(" ",i+1,") "),a(),S("value",t.value),a(),S("disabled",o.section().numbers.length===1)}}var D=class n{section=h(V());removable=$(!0);remove=J();number=$.required();total=R(()=>this.section().numbers.reduce((e,t)=>e+t.value,0));addNumber(){this.section.update(e=>M(E({},e),{numbers:[...e.numbers,w()]}))}removeNumber(e){this.section.update(t=>M(E({},t),{numbers:t.numbers.filter((i,o)=>o!==e)}))}changeNumber(e,t){this.section.update(i=>({numbers:i.numbers.map((r,l)=>l===e?{value:t}:r)}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["app-dynamic-input"]],inputs:{section:[1,"section"],removable:[1,"removable"],number:[1,"number"]},outputs:{section:"sectionChange",remove:"remove"},decls:15,vars:5,consts:[[1,"app-section-title"],[1,"remove-btn",3,"click","disabled"],[1,"app-input-number"],[1,"left"],[1,"app-add-btn",3,"click"],[1,"mid"],[1,"right"],[1,"app-section-result"],["type","number",1,"app-input-number-item",3,"change","value"]],template:function(t,i){t&1&&(m(0,"h2")(1,"span",0),c(2),s(),m(3,"button",1),b("click",function(){return i.remove.emit()}),c(4,"X"),s()(),m(5,"div",2)(6,"div",3)(7,"button",4),b("click",function(){return i.addNumber()}),c(8,"+ Input"),s(),y(9,U,5,3,"div",5,f),s(),m(11,"div",6)(12,"div",7),c(13),O(14,"number"),s()()()),t&2&&(a(2),x("Section ",i.number()),a(),S("disabled",!i.removable()),a(6),v(i.section().numbers),a(4),x("Result ",B(14,3,i.total())))},dependencies:[X],encapsulation:2,changeDetection:0})};var G="ng-section-data",N=class n{set(e){localStorage.setItem(G,JSON.stringify(e))}get(){let e=localStorage.getItem(G);return e?JSON.parse(e):null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function W(n,e){if(n&1){let t=g();I(0,"app-dynamic-input",2),k("sectionChange",function(o){let r=d(t).$index,l=u();return p(l.changeSection(r,o))})("remove",function(){let o=d(t).$index,r=u();return p(r.removeSection(o))}),T()}if(n&2){let t=e.$implicit,i=e.$index,o=e.$count;L("number",i+1)("section",t)("removable",o>1)}}var C=class n{dataStorage=P(N);sections=h(z(this.dataStorage.get()));constructor(){j(()=>{this.dataStorage.set(q(this.sections()))})}addSection(){this.sections.update(e=>[...e,{numbers:[{value:0}]}])}removeSection(e){this.sections.update(t=>t.filter((i,o)=>o!==e))}changeSection(e,t){this.sections.update(i=>i.map((o,r)=>r===e?t:o))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["app-dynamic-section"]],inputs:{sections:[1,"sections"]},outputs:{sections:"sectionsChange"},decls:5,vars:0,consts:[[1,"app-add-btn",3,"click"],[3,"number","section","removable"],[3,"sectionChange","remove","number","section","removable"]],template:function(t,i){t&1&&(I(0,"nav")(1,"button",0),k("click",function(){return i.addSection()}),c(2,"Section"),T()(),y(3,W,1,3,"app-dynamic-input",1,f)),t&2&&(a(3),v(i.sections()))},dependencies:[D],styles:[".app-add-btn[_ngcontent-%COMP%]{border-radius:5px;padding:10px;cursor:pointer;font-weight:700;border:2px solid blue;color:#00f}.app-add-btn[_ngcontent-%COMP%]:hover{background-color:gray;color:#fff}"],changeDetection:0})};var _e=[{path:"",component:C}];export{_e as default};
